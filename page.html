<!DOCTYPE html>
<html lang="en">

<head>

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-K5E3Z11QSB"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-K5E3Z11QSB');
    </script>


    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nittany Compass</title>
    <link rel="icon" type="image/x-icon" href="/NittanyCompass/icon.svg">
    <style>
        body {
            font-size: 1vw;
            font-family: 'verdana';
            margin: 1.4vw;
            display: flex;
            justify-content: space-between;
            background-color: #f2f5f8;
        }


        .slider-container {
            width: 60%;
            margin-right: 1.5vw;
            border: #8e8e8e 0.1vw solid;
            border-radius: 1vw;
            background: #ccdae6;
            padding-left: 2vw;
            box-shadow: 0 .2vw 1vw .5vw rgba(0, 0, 0, 0.4);
            margin-top: 7vw;
        }

        .subject-container {
            margin-bottom: .4vw;
            width: 65%;
            /* Adjusted for proportional width */
            border: #8e8e8e 0.1vw solid;


            background: #f8f9fa;
            width: calc(50% - 1vw);
            /* Adjusted for proportional width in a 2 by 4 grid */
            display: inline-block;
            margin-left: .2vw;
        }

        .collection-container {
            margin-bottom: .4vw;
            width: 65%;
            /* Adjusted for proportional width */
            border: #8e8e8e 0.1vw solid;


            background: #f8f9fa;
            width: calc(100% - 1.3vw);
            /* Adjusted for proportional width in a 2 by 4 grid */
            display: inline-block;
            margin-left: .2vw;
            margin-top: 1vw;
            padding-bottom: .5vw;
        }

        /* Styling for sliders */
        input[type="range"] {
            -webkit-appearance: none;
            width: .4vw;
            height: .4vw;
            background-color: #ff0000;
            border-radius: .1vw;
            outline: none;
            margin-top: .1vw;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: .4vw;
            height: .4vw;
            border-radius: 50%;
            background-color: #555;
            cursor: pointer;
        }

        .slider-track {
            position: relative;
            height: 1.2vw;
            background-color: #d7dde3;
            border-radius: .25rem;
            margin: .5vw;

        }

        .ratio-text {
            margin-left: 1vw;
            font-size: inherit;
        }

        .move-3-text {
            font-size: inherit;

            position: relative;
            left: 34%;
            text-decoration-line: underline;
            cursor: pointer;
        }

        .position-indicator {

            position: absolute;
            height: 1.2vw;
            width: 0;
            background-color: red;
            border-radius: .25rem;

        }

        .gradient-green {
            background: linear-gradient(45deg, #4CAF50 25%, transparent 25%, transparent 50%, #4CAF50 50%, #4CAF50 75%, transparent 75%, transparent);
            background-size: 2vw 2vw;
            /* Adjust size to control diagonal line density */
        }

        /* Blue indicator if position is 6 or greater */
        input[type="range"][value="6"]+.slider-track .position-indicator,
        input[type="range"][value="7"]+.slider-track .position-indicator,
        input[type="range"][value="8"]+.slider-track .position-indicator,
        input[type="range"][value="9"]+.slider-track .position-indicator {
            background-color: blue;
        }

        /* Class Lookup */
        .class-lookup-container {
            width: 35%;
            border: #8e8e8e 0.1vw solid;
            border-radius: 1vw;
            background: #ccdae6;
            padding-left: 2vw;
            box-shadow: 0 .2vw 1vw .5vw rgba(0, 0, 0, 0.4);
            padding-right: 2vw;
            margin-top: 7vw;
        }

        table {
            width: 100%;
            border-spacing: 0;
            /* Add this line to ensure no spacing between cells */
            margin-top: .5vw;
            border: #b7b7b7 solid .2vw
        }






        :root {

            --light-color-1: #eeeef0;
            --light-color-2: #d9dadd;
        }

        /* Dark variation of the colors */
        [data-theme="perfect-row"] {
            --light-color-1: #7b80d9;
            --light-color-2: #696ec8;
        }

        th,
        td {
            border-bottom: 0.1vw solid #a1a2ca;
            padding: 0.1vw;
            font-size: .9vw;

        }

        tr:nth-child(even) {
            background-color: var(--light-color-1);
        }

        tr:nth-child(odd) {
            background-color: var(--light-color-2);
        }

        .container {
            display: flex;
            /* Use flexbox for layout */
            justify-content: space-between;
            /* Distribute items evenly along the main axis */
            align-items: center;
            /* Center items vertically */
            width: 27vw;
            padding: 0;
            margin-top: -2vw;
            margin-bottom: -3vw;
        }

        .title-container {
            display: flex;
            /* Use flexbox for layout */
            justify-content: space-between;
            /* Distribute items evenly along the main axis */
            align-items: center;
            /* Center items vertically */
            width: 95vw;
            padding-left: 2vw;
            height: 6vw;
            background: #ccdae6;
            box-shadow: 0 .2vw 1vw .5vw rgba(0, 0, 0, 0.4);
            position: absolute;
            margin-top: -.5vw;
            border: #8e8e8e 0.1vw solid;
            border-radius: 1vw;

        }

        th {
            background-color: #f2f2f2;
        }

        input {
            padding: .5vw;
            margin-bottom: -0.1vw;
            width: calc(50%);
            display: inline-block;
            background: #FFF;
            color: black;
            font-size: inherit;
            border-radius: .3vw;

        }



        .center_button {
            align-content: center;
            display: flex;
            margin: .2vw;
            background-color: #4734a6;
            color: #fff;
            border: 0;
            border-radius: .3vw;
            width: 2vw;
            height: 2vw;
            display: inline-flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            padding-bottom: 0.2vw;
            font-size: 1.4vw
        }

        .suggest_button {
            padding-left: 1vw;
            padding-right: 1vw;
            font-size: 1vw;
            width: 12%;
            position: absolute;
            top: 0.2vw;
            right: 0.2vw;

        }

        .title-text {
            color: #212529;
            background-color: #f0f1f2;

            padding: .4vw;
            width: auto;
            display: block;
            border-bottom: 0.1vw solid rgba(0, 0, 0, .125);

            text-align: center !important;
            font-size: inherit;
            font-weight: bolder;
        }

        .mainTable {
            background: #f8f9fa;
            overflow-y: auto;
            max-height: 30vw;
            display: block;
            margin-bottom: 1vw;
            margin-top: 2vw;
        }


        .suggest_table {
            width: 49%;
            border-spacing: 0;
            margin-top: 0vw;
            display: inline-block;
            align-content: center;
            vertical-align: top;
        }

        .grid-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            grid-gap: .2vw;
            width: 7%;
            position: relative;

            scale: .8;
            transform: translate(-1vw, .8vw)
        }

        .grid-item {
            text-align: center;
            color: #212529;
            border: #8e8e8e 0.1vw solid;
            background-color: #fff;
            cursor: pointer;
            transition: background-color 0.3s ease;
            width: 4vw;
            padding-top: .1vw;
            padding-bottom: .1vw;
            transform: translate(0, -2vw);
            border-radius: .1vw;

        }

        .grid-item.clicked {
            color: #fff;
            background-color: #696ec8
        }

        .grid-item.double-clicked {
            color: #ffffff;
            background-color: #e86969;
        }

        .domain_text {
            width: 35%;
            text-align: center;
        }



        /* Modal styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.4);
        }

        .modal-content {
            background-color: #ccdae6;
            margin: 2% auto;
            padding: 1vw;
            padding-top: 1vw;
            border: .2vw solid #102370;
            width: 78%;
            border-radius: 2vw;
            padding-top: .5vw;
        }

        .close {
            color: #aaa;
            position: absolute;
            top: 1vw;
            right: 1.5vw;
            font-size: 5vw;
            font-weight: bold;
        }

        .close:hover,
        .close:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }

        /* Info icon style */
        .info-icon {
            cursor: pointer;
            position: absolute;
            right: 2.3vw;
            top: 1.6vw;
            scale: 2.5;
            color: #020c33;
            z-index: 100;
        }

        .link-button {
            text-decoration-line: underline;
            cursor: pointer;
            color: #10044f;
        }

        .mainTable thead {
            position: sticky;
            top: 0;
            background-color: #f2f2f2;
            /* Light gray */
        }

        .clear-button {
            width: 3.5vw;
            height: 2.2vw;
            align-items: end;
            margin-top: .4vw;
        }

        #textTable {

            border-collapse: separate;
            /* Separate borders between cells */
            border-spacing: 0 .5vw;
            width: 100%;
            border: 0;
            margin-top: 0;
        }

        #textTable th,
        #textTable td {
            border: 0.1vw solid black;
            padding: .5vw;
            background: #e7ebee;
        }

        .course-list {
            margin-top: .5vw;
        }

        .non-inter-text {
            position: relative;
            left: 1vw;
            display: inline-block;
        }
    </style>
    <link rel="stylesheet" href="path/to/font-awesome/css/font-awesome.min.css">




</head>



<body>
    <div id="infoModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="hideInfo()">&times;</span>

            <h2><strong>Getting Started</strong></h2>
            <p style="border: 0.1vw solid black;
  padding: .5vw;
  background: #e7ebee;">
                Nittany Compass was created to help Penn State student schedule their GEN ED course most efficiently.
                This tool allows you to find your most optimal course schedule; see and sort all GEN ED courses
                quickly; and
                find classes to fit your schedule and interests. <br />
                Before getting started, I recommend reading this section to better understand how to use this tool
                effectively.
            </p>
            <table id="textTable">
                <tr>
                    <th>Current Schedule</th>
                    <td>Here you can see all of the domains required for your general education. As you add
                        courses to
                        your schedule, these sections will begin to fill until you have a complete
                        schedule</td>
                </tr>
                <tr>
                    <th>Suggested Schedule</th>
                    <td>This tool shows you the most optimal course path for completing your remaining
                        requirements in
                        the fewest credits. It shows the domains and the credits for each of the suggestions, and by
                        clicking the apply buttons (down arrows), the Course Finder will show you courses that fill
                        that
                        role.</td>
                </tr>
                <tr>
                    <th>Course Finder</th>
                    <td>Here you can search for courses based on the course code, name, credits, and domains.
                        The search
                        will show you all perfect matches in blue, and all close matches in grey. You can clear the
                        filters with [delete] key or the clear button.</td>
                </tr>
                <tr>
                    <th>Courses</th>
                    <td>Courses can be added or removed from your schedule using the "+" or "-" buttons. For
                        more
                        information about a course, clicking the course code will open the official PSU page for
                        that
                        course.</td>
                </tr>
                <tr>
                    <th>Saving</th>
                    <td>Your schedule is saved by the URL of this page. By copying it, you can continue
                        building your
                        schedule at a later point.</td>
                </tr>
                <tr>
                    <th>Quick Start</th>
                    <td>To get started, find all of the classes you have already taken and add them to your schedule.
                        Then use the
                        Suggested Schedule to filter for classes that meet the remaining requirements. Search for
                        courses that meet each suggested requirement and repeat until all credit domains are filled.
                    </td>
                </tr>
                <tr>
                    <th>Disclaimer</th>
                    <td>This web tool is independently developed and maintained, with no association with Penn
                        State
                        University. It's recommended you consult with an academic advisor before changing your
                        schedule.
                    </td>
                </tr>
            </table>

            <p style="border: 0.1vw solid black;
  padding: .5vw;
  background: #e7ebee;">
                This tool is early in development and will be updated, there will be design flaws. If you have any
                feedback, feel free to use the web tool's forum:
                <a href="https://github.com/Lucas-Sadoulet/NittanyCompass/discussions/1">Nittany Compass Forum</a>

                <br />I hope this tool helps! <br /> - Lucas
            </p>
        </div>
    </div>
    <div id="move3Modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="hideInfoMove()">&times;</span>
            <p>Move "3" in Knowledge Domains: <br />Instead of taking the required credits GN, GHW, GA, GH, and GS, a
                student
                can move three credits from one knowledge domain into a different knowledge domain. The exception to
                this is that a student cannot take 3 credits out of GHW because the domain cannot go down to 0 credits.
                <br />
                <br />
                reference:<a href="https://advising.engr.psu.edu/degree-requirements/general-education.aspx"
                    target="_blank" rel="noopener noreferrer">Penn State
                    Information on Substitutions</a>
            </p>
        </div>
    </div>

    <div class="title-container">
        <h1 style="font-size: 4vw;
        color: #00005b;"><strong>Nittany Compass</strong></h1>
        <button class="center_button suggest_button" onclick="showInfo()">Getting Started</button>
        <h5 style="justify-content: left;top: 1.8vw;position: relative;padding-right: .3vw;text-align: right;">version:
            1.7<br>last update: 3/30/24</h5>
    </div>



    </div>
    <div class="slider-container">
        <h2 class="domain_text">Current Schedule</h2>

        <div style="width: 23%;
        right: 33%;
        position: absolute;
        top: 9.2vw;
        line-height: 0">
            <h4 style=" justify-content: right; display: inline-block; width: 12vw; margin-bottom:0;">total credits:
            </h4>

            <h4 id='credit_counter' style="justify-content: right;
            display: inline-block;
            width: 4vw; margin-bottom:0;">0</h4>

            <h4 style="justify-content: right;
            display: inline-block;
            width: 12vw;
        ">total courses:</h4>

            <h4 id='course_counter' style="justify-content: right;
            display: inline-block;
            width: 4vw;">0</h4>
        </div>



        <!-- Quantification (GQ) -->
        <div class="subject-container">
            <label class='title-text' for="subject1">Quantification [GQ]</label>
            <div class="slider-track">
                <div class="position-indicator"></div>
            </div>
            <span class='ratio-text' id="subject1Value"></span>

            <table class="course-list" id="addedCoursesTable_subject1">
                <thead>
                    <tr>
                        <th style="width: 25%">Course</th>
                        <th style="width: 60%">Title</th>
                        <th style="width:  5%;"></th>
                        <th style="width: 10%;"></th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Added courses will be displayed here -->
                </tbody>
            </table>
        </div>

        <!-- Writing/Speaking (GWS) -->
        <div class="subject-container">
            <label class='title-text' for="subject2">Writing/Speaking [GWS]</label>
            <div class="slider-track">
                <div class="position-indicator"></div>
            </div>
            <span class='ratio-text' id="subject2Value"></span>
            <table class="course-list" id="addedCoursesTable_subject2">
                <thead>
                    <tr>
                        <th style="width: 25%">Course</th>
                        <th style="width: 60%">Title</th>
                        <th style="width:  5%;"></th>
                        <th style="width: 10%;"></th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Added courses will be displayed here -->
                </tbody>
            </table>
        </div>

        <!-- Knowledge -->
        <div class="collection-container">
            <label class='title-text' for="subject2">Knowledge Domains</label>
            <div class="slider-track" id="knowledge_slider">
                <div class="position-indicator"></div>
            </div>
            <span class='ratio-text' id="subject2Value"></span>

        </div>

        <!-- Inter-Domain (ID) -->
        <div class="subject-container">
            <label class='title-text' for="subject3">Inter-Domain [ID]</label>
            <div class="slider-track">
                <div class="position-indicator"></div>
            </div>
            <span class='ratio-text' id="subject3Value"></span>
            <table class="course-list" id="addedCoursesTable_subject3">
                <thead>
                    <tr>
                        <th style="width: 25%">Course</th>
                        <th style="width: 60%">Title</th>
                        <th style="width:  5%;"></th>
                        <th style="width: 10%;"></th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Added courses will be displayed here -->
                </tbody>
            </table>
        </div>

        <!-- Arts (GA) -->
        <div class="subject-container">
            <label class='title-text' for="subject4">Arts [GA]</label>
            <div class="slider-track">
                <div class="position-indicator"></div>
            </div>
            <span class='ratio-text' id="subject4Value"></span>
            <span class='move-3-text' id="subject4Move" onclick="showInfoMove()"></span>
            <span class='non-inter-text' id="subject4Non"></span>

            <table class="course-list" id="addedCoursesTable_subject4">
                <thead>
                    <tr>
                        <th style="width: 25%">Course</th>
                        <th style="width: 60%">Title</th>
                        <th style="width:  5%;"></th>
                        <th style="width: 10%;"></th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Added courses will be displayed here -->
                </tbody>
            </table>
        </div>

        <!-- Health and Wellness (GHW) -->
        <div class="subject-container">
            <label class='title-text' for="subject5">Health and Wellness [GHW]</label>
            <div class="slider-track">
                <div class="position-indicator"></div>
            </div>
            <span class='ratio-text' id="subject5Value"></span>
            <span class='move-3-text' id="subject5Move"></span>
            <span class='non-inter-text' id="subject5Non">Testing</span>

            <table class="course-list" id="addedCoursesTable_subject5">
                <thead>
                    <tr>
                        <th style="width: 25%">Course</th>
                        <th style="width: 60%">Title</th>
                        <th style="width:  5%;"></th>
                        <th style="width: 10%;"></th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Added courses will be displayed here -->
                </tbody>
            </table>
        </div>

        <!-- Humanities (GH) -->
        <div class="subject-container">
            <label class='title-text' for="subject6">Humanities [GH]</label>
            <div class="slider-track">
                <div class="position-indicator"></div>
            </div>
            <span class='ratio-text' id="subject6Value"></span>
            <span class='move-3-text' id="subject6Move" onclick="showInfoMove()"></span>
            <span class='non-inter-text' id="subject6Non">TestingTestingTesting</span>

            <table class="course-list" id="addedCoursesTable_subject6">
                <thead>
                    <tr>
                        <th style="width:  25%">Course</th>
                        <th style="width:  60%">Title</th>
                        <th style="width:  5%;"></th>
                        <th style="width: 10%;"></th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Added courses will be displayed here -->
                </tbody>
            </table>
        </div>

        <!-- Natural Sciences (GN) -->
        <div class="subject-container">
            <label class='title-text' for="subject7">Natural Sciences [GN]</label>
            <div class="slider-track">
                <div class="position-indicator"></div>
            </div>
            <span class='ratio-text' id="subject7Value"></span>
            <span class='move-3-text' id="subject7Move" onclick="showInfoMove()"></span>
            <span class='non-inter-text' id="subject7Non"></span>

            <table class="course-list" id="addedCoursesTable_subject7">

                <thead>
                    <tr>
                        <th style="width: 25%">Course</th>
                        <th style="width: 60%">Title</th>
                        <th style="width:  5%;"></th>
                        <th style="width: 10%;"></th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Added courses will be displayed here -->
                </tbody>
            </table>
        </div>

        <!-- Social and Behavioral (GS) -->
        <div class="subject-container">
            <label class='title-text' for="subject8">Social and Behavioral [GS]</label>
            <div class="slider-track">
                <div class="position-indicator"></div>
            </div>
            <span class='ratio-text' id="subject8Value"></span>
            <span class='move-3-text' id="subject8Move" onclick="showInfoMove()"></span>
            <span class='non-inter-text' id="subject8Non"></span>

            <table class="course-list" id="addedCoursesTable_subject8">
                <thead>
                    <tr>
                        <th style="width: 25%">Course</th>
                        <th style="width: 60%">Title</th>
                        <th style="width:  5%;"></th>
                        <th style="width: 10%;"></th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Added courses will be displayed here -->
                </tbody>
            </table>
        </div>

        <!-- International Cultures (IL) -->
        <div class="subject-container" style="margin-top: 1vw;">
            <label class='title-text' for="subject9">International Cultures [IL]</label>
            <div class="slider-track">
                <div class="position-indicator"></div>
            </div>
            <span class='ratio-text' id="subject9Value"></span>
            <table class="course-list" id="addedCoursesTable_subject9">
                <thead>
                    <tr>
                        <th style="width: 25%">Course</th>
                        <th style="width: 60%">Title</th>
                        <th style="width:  5%;"></th>
                        <th style="width: 10%;"></th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Added courses will be displayed here -->
                </tbody>
            </table>
        </div>

        <!-- US Cultures (US) -->
        <div class="subject-container">
            <label class='title-text' for="subject10">US Cultures [US]</label>
            <div class="slider-track">
                <div class="position-indicator"></div>
            </div>
            <span class='ratio-text' id="subject10Value"></span>
            <table class="course-list" id="addedCoursesTable_subject10">
                <thead>
                    <tr>
                        <th style="width: 25%">Course</th>
                        <th style="width: 60%">Title</th>
                        <th style="width:  5%;"></th>
                        <th style="width: 10%;"></th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Added courses will be displayed here -->
                </tbody>
            </table>
        </div>


    </div>

    <div class="class-lookup-container">



        <h2>Suggested Schedule</h2>

        <div class="table-container">
            <table id="suggestTable" style="visibility:collapse" class="mainTable suggest_table">
                <thead>
                    <tr>
                        <th style="width: 65%">Domains</th>
                        <th style="width: 20%">Credits</th>
                        <th style="width: 15%"></th>
                    </tr>
                </thead>
                <tbody id="suggestTableBody">
                    <!-- Table content will be dynamically updated here -->
                </tbody>
            </table>

            <table id="suggestTableSecond" style="visibility:collapse" class="mainTable suggest_table">
                <thead>
                    <tr>
                        <th style="width: 65%">Domains</th>
                        <th style="width: 20%">Credits</th>
                        <th style="width: 15%"></th>
                    </tr>
                </thead>
                <tbody id="suggestTableBodySecond">
                    <!-- Table content will be dynamically updated here -->
                </tbody>
            </table>
        </div>
        <h2 style="translate: 0 .5vw;">Course Lookup</h2>
        <i class="fas fa-trash-alt"></i>
        <div class="container">
            <div>
                <input type="text" id="courseCodeInput" placeholder="Course Code" oninput="updateTable()">
                <input type="number" style="width:20%" id="creditsInput" placeholder="Credits" oninput="updateTable()">
                <input type="text" style="width:60%" id="courseNameInput" placeholder="Course Title"
                    oninput="updateTable()">
                <button class="clear-button center_button" id="clearInput" onclick="clearInputs()">
                    ⌫ </button>

            </div>
            <div class="grid-container">

                <div class="grid-item" onclick="toggleColor(this, 0)">
                    <label for="option1">GQ</label>
                </div>

                <div class="grid-item" onclick="toggleColor(this, 1)">
                    <label for="option2">GWS</label>
                </div>


                <div class="grid-item" onclick="toggleColor(this, 2)">
                    <label for="option3">ID</label>
                </div>

                <div class="grid-item" onclick="toggleColor(this, 3)">
                    <label for="option4">GA</label>
                </div>

                <div class="grid-item" onclick="toggleColor(this, 4)">
                    <label for="option5">GHW</label>
                </div>

                <div class="grid-item" onclick="toggleColor(this, 5)">
                    <label for="option6">GH</label>
                </div>

                <div class="grid-item" onclick="toggleColor(this, 6)">
                    <label for="option7">GN</label>
                </div>

                <div class="grid-item" onclick="toggleColor(this, 7)">
                    <label for="option8">GS</label>
                </div>

                <div class="grid-item" onclick="toggleColor(this, 8)">
                    <label for="option9">IL</label>
                </div>

                <div class="grid-item" onclick="toggleColor(this, 9)">
                    <label for="option10">US</label>
                </div>

                <!-- Add more grid items as needed -->

            </div>

        </div>




        <table id="classTable" class="mainTable">
            <thead>
                <tr>
                    <th style="width: 20%;">Course</th>
                    <th style="width: 50%;">Title</th>
                    <th style="width: 10%;"></th>
                    <th style="width: 30%;">Domains</th>
                    <th style="width: 10%;"></th>
                </tr>
            </thead>
            <tbody id="tableBody">
                <!-- Table content will be dynamically updated here -->
            </tbody>
        </table>




    </div>

    <script>

        const fill_width = 10.25

        var credit_count = 0;
        var course_count = 0;
        var knowledge_count = 0;

        var non_inter = [3, 3, 3, 3, 3];

        const qualificationSize = {
            1: 6,
            2: 9,
            3: 6,
            4: 6,
            5: 3,
            6: 6,
            7: 9,
            8: 6,
            9: 3,
            10: 3,
        }

        var unadded_dataset = []




        function toBinaryArray(numbers, credits) {
            const binaryArray = [];
            for (let i = 1; i <= 10; i++) {
                binaryArray.push(numbers.includes(i) ? credits : 0);
            }
            return binaryArray;
        }

        function reduceQuals(remainingCredits, courses) {
            var reduced_array = []
            courses.forEach(course => {
                for (var j = 0; j < course[1].length; j++) {
                    if (remainingCredits[j] <= 0) {
                        course[1][j] = 0
                    }
                }
                reduced_array.push(course.slice())
            })
            return reduced_array;
        }

        function clearInputs() {
            const inputElement = document.getElementById("creditsInput");
            inputElement.value = "";

            const courseCode = document.getElementById("courseCodeInput");
            courseCode.value = "";

            const courseName = document.getElementById("courseNameInput");
            courseName.value = "";

            selected_filter = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]

            const gridItems = document.getElementsByClassName("grid-item");
            for (var i = 0; i < selected_filter.length; i++) {

                gridItems[i].classList.remove('clicked');
                gridItems[i].classList.remove('double-clicked');

            }
            updateTable()
        }

        function getCourseScore(course_credits, remaining, remainingNonInter) {

            maximum = Math.max(remaining)
            var score = 0;
            var extra = 0;

            for (var i = 0; i < remaining.length; i++) {
                if (course_credits[1][i]) {

                    if (i == 6) {
                        extra += .1
                    }
                    if (course_credits == 3) {
                        extra += 0
                    }
                    if (i > 2 && i < 8 && remainingNonInter[i - 3] > 0 && course_credits[1][i] == 1 && course_credits[2] == 1) {
                        extra += 100

                    }
                    score += course_credits[0] + Math.min(remaining[i] - course_credits[0], 0)
                }
            }

            var new_score = (score) / course_credits[0] + extra

            return new_score
        }

        function removeDuplicates(array) {
            // Create an empty object to keep track of unique objects
            let uniqueObjects = {};

            // Filter the array to keep only unique objects
            let uniqueArray = array.filter(obj => {
                // Generate a unique key based on object parameters
                let key = obj[0] + " " + obj[1] + " " + obj[2];

                // If the key does not exist in the uniqueObjects map, add the object
                if (!uniqueObjects[key]) {
                    uniqueObjects[key] = true;
                    return true;
                }

                // If the key already exists, filter out the duplicate object
                return false;
            });

            return uniqueArray;
        }

        function optimalCourses(remainingCredits, remainingNonInter, courses, depth = 0) {





            var courses_reduced = reduceQuals(remainingCredits, courses)


            courses_reduced = JSON.parse(JSON.stringify(courses_reduced));



            courses_reduced_filled = courses_reduced.filter(subArray => !(subArray[1].every(element => element === 0)));
            var filtered_courses = removeDuplicates(courses_reduced_filled)




            var sorted_courses = filtered_courses.sort((a, b) => getCourseScore(b, remainingCredits, remainingNonInter) > getCourseScore(a, remainingCredits, remainingNonInter));

            //var sorted_courses = filtered_courses.sort((a, b) => {
            //    return getCourseScore(b, remainingCredits) - getCourseScore(a, remainingCredits) || matchValue(b, remainingCredits) - matchValue(a, remainingCredits);
            //});



            if (sorted_courses.length == 0) return []

            var best = [sorted_courses[0][0], sorted_courses[0][1].slice(), sorted_courses[0][2]]


            for (var i = 0; i < remainingCredits.length; i++) {
                remainingCredits[i] = Math.max(remainingCredits[i] - best[0] * best[1][i], 0)
            }

            if (best[2] == 1) {
                for (var i = 0; i < remainingNonInter.length; i++) {
                    remainingNonInter[i] = Math.max(remainingNonInter[i] - best[0] * best[1][i + 3], 0)
                }
            }

            if (remainingCredits.every(element => element === 0) && remainingNonInter.every(element => element === 0)) {
                return [best]
            }

            solve = optimalCourses(remainingCredits, remainingNonInter, sorted_courses, depth + 1)

            return solve.concat([best.slice()])




        }

        function setSort(qualifications, credit, alone = 0) {

            clearInputs()
            const inputElement = document.getElementById("creditsInput");
            inputElement.value = credit;

            const gridItems = document.getElementsByClassName("grid-item");
            for (var i = 0; i < qualifications.length; i++) {

                if (qualifications[i] > 0) {
                    gridItems[i].classList.add('clicked');

                    selected_filter[i] = 1

                }
                else {
                    gridItems[i].classList.remove('clicked');
                    selected_filter[i] = 0
                }
            }
            if (alone) {
                gridItems[2].classList.add('double-clicked');
                gridItems[2].classList.remove('clicked');
                selected_filter[2] = -1

            }

            updateTable()

        }

        function reduceRequirements(entry, requirements) {
            for (var i = 0; i < entry.length; i++) {
                if (requirements[i] <= 0) {
                    entry[i] = 0
                }
            }
            return entry
        }

        function generate(type) {
            // Cache DOM elements

            // convert added_dataset to hexcodes


            const startTime = performance.now();

            const requirements = [];
            const tableBody = document.getElementById('suggestTableBody');
            const tableBodySecond = document.getElementById('suggestTableBodySecond');
            const table = document.getElementById('suggestTable');
            const tableSecond = document.getElementById('suggestTableSecond');
            // Calculate requirements and retrieve filled values
            for (let i = 1; i <= 10; i++) {
                const filled = parseFloat(document.getElementById(`subject${i}Value`).innerText.split(" of ")[0]);
                requirements.push(Math.max(0, qualificationSize[i] - filled));
            }

            // Process unadded_dataset to calculate domainSet and binary_set
            const domainSet = {};
            const binarySet = [];

            for (const course of unadded_dataset) {
                const domains = JSON.stringify([...new Set(course.qualifications.map(String))]);

                if (domainSet[domains]) {
                    domainSet[domains]++;
                } else {
                    domainSet[domains] = 1;
                }

                bin_array = toBinaryArray(course.qualifications, 1)
                alone = 0
                if (bin_array[2] != 1) {
                    alone = 1
                }

                binarySet.push([parseFloat(course.credit), bin_array, alone]);
            }

            completeBinarySet = [...binarySet]
            // Perform item selection based on requirements

            remainingNonInter = [...non_inter]
            //const suggestedPlan = selectItems(requirements, binarySet).reverse();


            const suggestedPlan = optimalCourses(requirements, remainingNonInter, binarySet).reverse();

            // Generate table rows

            tableSecond.style.visibility = 'hidden';
            table.style.visibility = 'hidden';
            tableBody.innerHTML = '';
            tableBodySecond.innerHTML = "";
            if (suggestedPlan.length > 0) {
                table.style.visibility = 'visible';

            }
            if (suggestedPlan.length > 1) {
                tableSecond.style.visibility = 'visible';

            }

            count = 0
            console.log(suggestedPlan)
            suggestedPlan.forEach(entry => {

                count += 1
                const credits = entry[0];

                const reducedEntry = entry[1];

                const alone = entry[2];


                const row = document.createElement('tr');
                const qualificationsCell = document.createElement('td');
                const courseCreditCell = document.createElement('td');
                const actionsCell = document.createElement('td');

                // Extract qualification set
                const qualificationSet = reducedEntry.reduce((acc, value, index) => {
                    if (value !== 0) {
                        acc.push(qualificationMapAbbr[index]);
                    }
                    return acc;
                }, []);


                var text = ""
                if (alone) {
                    text += '<s>[ID]</s>, '

                }
                text += qualificationSet.join(', ');
                qualificationsCell.innerHTML = text;


                courseCreditCell.textContent = credits;
                courseCreditCell.style.textAlign = "center";

                // Create and attach Sort button
                const sortButton = document.createElement('button');
                sortButton.textContent = '⇓';
                sortButton.classList.add("center_button");
                sortButton.addEventListener('click', () => setSort(reducedEntry, credits, alone));
                actionsCell.appendChild(sortButton);

                // Append cells to row and row to table body
                row.appendChild(qualificationsCell);
                row.appendChild(courseCreditCell);
                row.appendChild(actionsCell);

                if (count > (suggestedPlan.length + 1) / 2) {
                    tableBodySecond.appendChild(row);
                }
                else {
                    tableBody.appendChild(row);
                }

            });
            //const time = document.getElementById('generate_time');

            const endTime = performance.now();

            //time.innerHTML = endTime - startTime + " ms";

        }

        function markCompleteness(completeArray, incompleteArray) {
            // Initialize an array to store completeness markers
            var completenessArray = [];

            // Iterate over the complete array
            for (var i = 0; i < incompleteArray.length; i++) {
                // Check if the current element is in the incomplete array
                console.log("course:", incompleteArray[i])
                if (completeArray.includes(incompleteArray[i])) {
                    completenessArray.push(completeArray.indexOf(incompleteArray[i])); // If present, assign 1
                }
            }

            return completenessArray;
        }

        async function fetchData() {

            // Specify the path to your JSON file
            const jsonFilePath = 'courses.json';

            try {
                // Fetch the JSON file
                const response = await fetch(jsonFilePath);

                // Check for errors in the response
                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }

                // Extract the JSON data
                const data = await response.json();

                // Extract the list from the JSON data
                const filteredData = data.filter(obj => {

                    if (obj.courseName.toLowerCase().indexOf("special topics") > -1 || obj.courseName.toLowerCase().indexOf("foreign studies") > -1) {
                        return false
                    }
                    else {

                        return true
                    }
                });

                let cleanData = [];
                filteredData.forEach(obj => {

                    if (obj.qualifications.includes(9) && obj.qualifications.includes(10)) {


                        quals = [...obj.qualifications]
                        quals_10 = quals.filter(num => num !== 9);
                        quals_9 = quals.filter(num => num !== 10);

                        let deepCopy = JSON.parse(JSON.stringify(obj));
                        deepCopy.qualifications = quals_10
                        obj.qualifications = quals_9
                        cleanData.push(deepCopy);
                        cleanData.push(obj);

                    } else {

                        cleanData.push(obj);

                    }
                });

                console.log(filteredData)

                unadded_dataset = cleanData;

                complete_dataset = cleanData;

                // Now you can use itemList as your list of items

                // Continue with the rest of your code here
                // ...

            } catch (error) {
                console.error('Error fetching JSON:', error.message);
            }

            const currentURL = window.location.href;

            const clearInput = document.getElementById("clearInput");
            const codeInput = document.getElementById("courseCodeInput");

            clearInput.addEventListener('keydown', function (event) {
                if (event.key === 'Tab') {
                    event.preventDefault();
                    codeInput.focus();
                }
            });

            document.addEventListener('keydown', function (event) {
                if (event.key === 'Delete') {
                    clearInputs()
                }
            });


            let numberInput = document.getElementById('creditsInput');

            numberInput.addEventListener('input', function () {

                let value = parseFloat(numberInput.value);

                if (value <= 0) {
                    numberInput.value = "";
                }
            });

            const urlParams = new URLSearchParams(window.location.search);
            var metadata = urlParams.get('courses') || ""

            // I don't even know, this sorts the complete dataset...
            addToQualification(complete_dataset[0])
            removeFromQualification(complete_dataset[0])

            console.log("meta_data", metadata)
            while (metadata.length > 0) {

                hex = metadata.substring(0, 3)
                metadata = metadata.substring(3)


                dec = parseInt(hex, 16);
                addToQualification(complete_dataset[dec])



                console.log("meta_data_sub", metadata)


            }

            function myFunction() {
                updateTable()
                updateQualificationTables()
                //generate("")

            }

            let delayInMilliseconds = 1000;

            setTimeout(myFunction, delayInMilliseconds);


        }

        fetchData();
        qualificationMap = [
            'Quantification [GQ]',
            'Writing/Speaking [GWS]',
            'Inter-Domain [ID]',
            'Arts [GA]',
            'Health and Wellness [GHW]',
            'Humanities [GH]',
            'Natural Sciences [GN]',
            'Social and Behavioral [GS]',
            'International Cultures [IL]',
            'US Cultures [US]',

        ];
        qualificationMapAbbr = [
            '[GQ]',
            '[GWS]',
            '[ID]',
            '[GA]',
            '[GWH]',
            '[GH]',
            '[GN]',
            '[GS]',
            '[IL]',
            '[US]',


        ];

        var added_dataset = [];

        const addedCourses = [[], [], [], [], [], [], [], [], [], []];
        selected_filter = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]

        function toggleColor(element, number) {

            if (number == 2) {
                selected_filter[number] = [0, 1, -1][selected_filter[number] + 1]

                if (selected_filter[number] == -1) {
                    element.classList.remove('clicked');
                    element.classList.add('double-clicked');
                }
                else if (selected_filter[number] == 0) {
                    element.classList.remove('double-clicked');
                }
                else {
                    element.classList.add('clicked');
                }

            }
            else {
                selected_filter[number] = [1, 0][selected_filter[number]]
                element.classList.toggle('clicked');

            }
            updateTable()
        }

        function sum_filter(course) {
            total = 0
            course.qualifications.forEach(num => {
                total = total + [.01, 1][selected_filter[num - 1]]

            })
            return total;
        }

        function link_move_3() {

        }

        function createRow(tableBody, entry, perfect) {
            const row = document.createElement('tr');
            const courseCodeCell = document.createElement('td');
            const courseNameCell = document.createElement('td');
            const courseCreditCell = document.createElement('td');

            const qualificationsCell = document.createElement('td');

            const actionsCell = document.createElement('td');

            courseCodeCell.textContent = entry.courseCode + " " + entry.courseNumber;
            courseCodeCell.classList.add("link-button")
            courseCreditCell.style.textAlign = "center";

            courseCodeCell.addEventListener('click', function () {

                //window.open("http://127.0.0.1:5500/PennStateGenEd.html");
                //getCourseDescription(entry.courseCode + " " + entry.courseNumber)
                window.open("https://bulletins.psu.edu/search/?P=" + entry.courseCode + "%20" + entry.courseNumber, '_blank', 'noopener,noreferrer');

            });
            courseNameCell.textContent = entry.courseName;
            courseCreditCell.textContent = entry.credit;
            // Map qualification numbers to titles for display
            const qualificationTitles = entry.qualifications.map(getQualificationTitle);

            qualificationsCell.innerHTML = qualificationTitles.join(' ');

            // Add "Add" and "Remove" buttons
            const addButton = document.createElement('button');
            addButton.textContent = '+';
            addButton.classList.add("center_button")

            if (perfect) {
                row.setAttribute('data-theme', 'perfect-row');
            }

            addButton.addEventListener('click', () => addToQualification(entry, row));
            /* const removeButton = document.createElement('button');
            removeButton.textContent = 'Remove';
            removeButton.addEventListener('click', () => removeFromQualification(entry)); */

            actionsCell.appendChild(addButton);
            // actionsCell.appendChild(removeButton);

            row.appendChild(courseCodeCell);
            row.appendChild(courseNameCell);
            row.appendChild(courseCreditCell);
            row.appendChild(qualificationsCell);
            row.appendChild(actionsCell);

            tableBody.appendChild(row);
        }

        function updateTable() {
            const courseCodeNumberInput = document.getElementById('courseCodeInput').value.trim().toLowerCase();
            const courseNameInput = document.getElementById('courseNameInput').value.trim().toLowerCase();
            const creditInput = document.getElementById('creditsInput').value.trim().toLowerCase();




            let firstNumberPattern = /\d/;

            let firstNumberIndex = courseCodeNumberInput.search(firstNumberPattern);

            let courseCodeInput = courseCodeNumberInput.substring(0, firstNumberIndex).trim();

            let courseNumberInput = courseCodeNumberInput.substring(firstNumberIndex).trim();



            if (!firstNumberPattern.test(courseNumberInput)) {
                courseCodeInput = courseNumberInput
                courseNumberInput = ""
            }

            selected_filter_count = 0
            selected_filter.forEach(num => {
                selected_filter_count += Math.max(num, 0);
            })

            perfect_rows = true
            if (courseCodeInput == "" && courseNumberInput == "" && courseNameInput == "" && creditInput <= 0 && selected_filter_count == 0) {
                perfect_rows = false
            }
            var filteredDataClean = unadded_dataset.filter(entry => true)

            if (selected_filter[2] == -1) {

                filteredDataClean = unadded_dataset.filter(entry =>
                    !entry.qualifications.includes(3)
                );
            }

            unadded_dataset.sort((a, b) => {
                var a_count = sum_filter(a)
                var b_count = sum_filter(b)
                codeComparison = b_count - a_count;
                if (codeComparison !== 0) {
                    return codeComparison;
                }
                codeComparison = a.courseCode.localeCompare(b.courseCode);
                if (codeComparison !== 0) {
                    return codeComparison;
                }
                return a.courseNumber.localeCompare(b.courseNumber);
            });
            const filteredDataStart = filteredDataClean.filter(entry =>
                entry.courseCode.toLowerCase().startsWith(courseCodeInput) &&
                entry.courseNumber.toLowerCase().startsWith(courseNumberInput) && (sum_filter(entry) >= selected_filter_count || selected_filter_count == 0) && (entry.credit == creditInput || creditInput <= 0) && (entry.courseName.toLowerCase().indexOf(courseNameInput) >= 0) && perfect_rows
            );
            /*const filteredDataContain = unadded_dataset.filter(entry =>
                (entry.courseCode.toLowerCase().indexOf(courseCodeInput) >= 0 &&
                    entry.courseNumber.toLowerCase().indexOf(courseNumberInput) >= 0) && !filteredDataStart.includes(entry) && (sum_filter(entry) >= 1 || selected_filter_count == 0) && (entry.credit >= creditInput) && (entry.courseName.toLowerCase().indexOf(courseNameInput) >= 0)
            );*/

            const filteredDataContain = unadded_dataset.filter(entry =>
                (entry.courseCode.toLowerCase().indexOf(courseCodeInput) >= 0 &&
                    entry.courseNumber.toLowerCase().indexOf(courseNumberInput) >= 0) && !filteredDataStart.includes(entry) && (sum_filter(entry) >= selected_filter_count || selected_filter_count == 0) && (entry.courseName.toLowerCase().indexOf(courseNameInput) >= 0)
            );

            // var accepted_course = filteredDataStart.concat(filteredDataContain);
            const tableBody = document.getElementById('tableBody');
            tableBody.innerHTML = '';

            var row_count = 0;
            filteredDataStart.forEach(entry => {
                row_count += 1
                if (row_count > 150) {
                    return
                }
                createRow(tableBody, entry, true)

            });
            filteredDataContain.forEach(entry => {

                row_count += 1
                if (row_count > 150) {
                    return
                }
                createRow(tableBody, entry, false)
            });


        }

        function getQualificationTitle(qualificationNumber) {

            if (selected_filter[qualificationNumber - 1] == 1)
                return "<strong>" + qualificationMapAbbr[qualificationNumber - 1] + "</strong>" || ''//'Unknown Qualification';

            return qualificationMapAbbr[qualificationNumber - 1] || ''//'Unknown Qualification';


        }

        function updateSliderValue(subjectId) {
            // Update the displayed value next to the slider
            const slider = document.getElementById(subjectId);
            const valueSpan = document.getElementById(subjectId + 'Value');
            valueSpan.innerHTML = slider.value;

            // Update the position indicator
            const positionIndicator = slider.nextElementSibling.querySelector('.position-indicator');
            const newValue = slider.value / (slider.max - slider.min) * 100;
            positionIndicator.style.left = `${newValue}%`;
        }



        function updateQualificationTables() {
            for (var i = 1; i <= 10; i++) {
                var subjectTable = document.getElementById(`addedCoursesTable_subject${i}`);
                var filled = document.getElementById(`subject${i}Value`);
                filled.innerHTML = 0
                while (subjectTable.firstElementChild.nextElementSibling) {

                    subjectTable.removeChild(subjectTable.firstElementChild.nextElementSibling);
                }

            }
            added_dataset.forEach(course => {
                const qualifications = course.qualifications;
                qualifications.forEach(qualification => {
                    // Find the matching slider and update its value


                    if (qualification) {

                        var subjectTable = document.getElementById(`addedCoursesTable_subject${qualification}`);

                        const row = document.createElement('tr');
                        const courseCodeCell = document.createElement('td');
                        const courseNameCell = document.createElement('td');
                        const courseCreditCell = document.createElement('td');
                        const actionsCell = document.createElement('td');
                        // Opens the link in a new tab
                        courseCodeCell.classList.add("link-button")
                        courseCodeCell.textContent = course.courseCode + " " + course.courseNumber;

                        courseCodeCell.addEventListener('click', function () {

                            //window.open("http://127.0.0.1:5500/PennStateGenEd.html");
                            //getCourseDescription(entry.courseCode + " " + entry.courseNumber)
                            window.open("https://bulletins.psu.edu/search/?P=" + course.courseCode + "%20" + course.courseNumber, '_blank', 'noopener,noreferrer');

                        });


                        courseNameCell.textContent = course.courseName;
                        courseCreditCell.textContent = course.credit;

                        var filled = document.getElementById(`subject${qualification}Value`);
                        filled.innerHTML = parseFloat(course.credit) + parseFloat(filled.innerHTML)

                        const removeButton = document.createElement('button');
                        removeButton.textContent = '-';
                        //const trashcanIcon = document.createElement('span');
                        //trashcanIcon.classList.add('fa-solid', 'fa-trash','trash_icon'); // Font Awesome trashcan icon -->
                        //removeButton.appendChild(trashcanIcon);
                        removeButton.classList.add("center_button")


                        removeButton.addEventListener('click', () => removeFromQualification(course));

                        actionsCell.appendChild(removeButton);
                        // actionsCell.appendChild(removeButton);




                        row.appendChild(courseCodeCell);
                        row.appendChild(courseNameCell);
                        row.appendChild(courseCreditCell);
                        row.appendChild(actionsCell);

                        subjectTable.appendChild(row);

                        addedCourses[qualification - 1].push(course)




                    }
                });
            });

            var subjectTable = document.getElementById(`knowledge_slider`);
            var ratio = subjectTable.parentElement.querySelector('.ratio-text');
            ratio.innerHTML = knowledge_count + " of 30 credits"
            filled = Math.min(knowledge_count, 30)
            var sliderIndicator = subjectTable.parentElement.querySelector('.position-indicator');
            sliderIndicator.style.width = (filled / 30) * 100 + "%"

            var sliderTrack = subjectTable.parentElement.querySelector('.slider-track');
            sliderTrack.style.width = 9.5 * fill_width + "%"


            if (filled >= 30) {
                sliderIndicator.style.backgroundColor = "#069128";
                sliderIndicator.classList.add("gradient-green")
            }
            else {
                sliderIndicator.style.backgroundColor = "#7b80d9";
                try {
                    sliderIndicator.classList.remove("gradient-green")
                }
                catch {

                }
            }

            for (var i = 1; i <= 10; i++) {
                var filled = parseFloat(document.getElementById(`subject${i}Value`).innerHTML);
                var subjectTable = document.getElementById(`addedCoursesTable_subject${i}`);

                const ratio = subjectTable.parentElement.querySelector('.ratio-text');
                const move_3_element = subjectTable.parentElement.querySelector('.move-3-text');

                if (move_3_element) {
                    if (filled - 3 >= qualificationSize[i] && i <= 8 && i >= 4 && i != 5) {
                        move_3_element.innerHTML = "Move-3 Possible"
                    }
                    else {
                        move_3_element.innerHTML = ""
                    }
                }

                const non_inter_element = subjectTable.parentElement.querySelector('.non-inter-text');

                if (non_inter_element) {
                    if (non_inter[i - 4] > 0) {
                        non_inter_element.innerHTML = (3 - non_inter[i - 4]) + " of 3 credits of Non-Interdomain"
                    }
                    else {
                        non_inter_element.innerHTML = ""
                    }
                }

                ratio.innerHTML = filled + " of " + qualificationSize[i] + " credits"



                filled = Math.min(filled, qualificationSize[i])


                const sliderIndicator = subjectTable.parentElement.querySelector('.position-indicator');
                sliderIndicator.style.width = (filled / qualificationSize[i]) * 100 + "%"

                const sliderTrack = subjectTable.parentElement.querySelector('.slider-track');
                sliderTrack.style.width = qualificationSize[i] * fill_width + "%"
                /*if(filled >= qualificationSize[i] + 3)
                {
                    sliderIndicator.style.backgroundColor = "#12872f";
                }
                else
                */
                if (filled >= qualificationSize[i]) {
                    sliderIndicator.style.backgroundColor = "#069128";
                    sliderIndicator.classList.add("gradient-green")
                }
                else {
                    sliderIndicator.style.backgroundColor = "#7b80d9";
                    try {
                        sliderIndicator.classList.remove("gradient-green")
                    }
                    catch {

                    }
                }
            }
        }

        function removeFromQualification(course) {


            course_count -= 1;
            const course_counter = document.getElementById('course_counter');
            course_counter.innerHTML = course_count

            credit_count -= parseFloat(course.credit);
            const credit_counter = document.getElementById('credit_counter');
            credit_counter.innerHTML = credit_count


            if (hasNumberInRange(course.qualifications)) {
                knowledge_count -= parseFloat(course.credit);
            }

            if (!course.qualifications.includes(3)) {
                for (var i = 4; i <= 8; i++) {
                    if (course.qualifications.includes(i)) {
                        non_inter[i - 4] = parseInt(non_inter[i - 4]) + parseInt(course.credit)
                    }
                }
            }

            //added_dataset.pop(course)
            added_dataset = added_dataset.filter(item => item !== course);
            unadded_dataset.push(course)


            updateQualificationTables()
            updateTable()
            console.log(complete_dataset)
            updateURL()
            generate("")

        }

        function updateURL() {
            indexes = markCompleteness(complete_dataset, added_dataset)

            extended_hex = ""

            indexes.forEach(index => {
                hex = index.toString(16).toUpperCase();

                for (var i = 0; i < 3 - hex.length; i++) {
                    extended_hex += "0"
                }
                extended_hex += hex;

            })
            try {
                const newURL = "https://lucas-sadoulet.github.io/NittanyCompass/page.html" + '?courses=' + encodeURIComponent(extended_hex);

                // Update the URL without reloading the page
                history.pushState(null, '', newURL);
            }
            catch {
                const newURL = "http://127.0.0.1:5500/PennStateGenEd.html" + '?courses=' + encodeURIComponent(extended_hex);

                // Update the URL without reloading the page
                history.pushState(null, '', newURL);
            }
        }
        function hasNumberInRange(array) {
            console.log("array")
            return array.some(num => num > 3 && num < 9);
        }

        function addToQualification(course, row) {


            course_count += 1
            const course_counter = document.getElementById('course_counter');
            course_counter.innerHTML = course_count

            credit_count += parseFloat(course.credit);
            const credit_counter = document.getElementById('credit_counter');
            credit_counter.innerHTML = credit_count

            if (hasNumberInRange(course.qualifications)) {
                knowledge_count += parseFloat(course.credit);
            }

            if (!course.qualifications.includes(3)) {
                for (var i = 4; i <= 8; i++) {
                    if (course.qualifications.includes(i)) {
                        non_inter[i - 4] = non_inter[i - 4] - parseInt(course.credit)
                    }
                }
            }
            if (row)
                row.remove()



            unadded_dataset = unadded_dataset.filter(item => item !== course);
            added_dataset.push(course)




            updateQualificationTables()
            //updateTable()
            updateURL()
            generate()
        }

        function updateAddedCoursesTable(sliderId) {
            // Update the table for the added courses based on the sliderId
            const addedCoursesTable = document.getElementById(`addedCoursesTable_subject${sliderId + 1}`);
            addedCoursesTable.innerHTML = '';

            addedCourses[sliderId].forEach(course => {
                const row = document.createElement('tr');
                const courseCodeCell = document.createElement('td');
                const classNumberCell = document.createElement('td');
                const courseNameCell = document.createElement('td');

                courseCodeCell.textContent = course.courseCode;

                classNumberCell.textContent = course.courseNumber;
                courseNameCell.textContent = course.courseName;

                row.appendChild(courseCodeCell);
                row.appendChild(classNumberCell);
                row.appendChild(courseNameCell);

                addedCoursesTable.appendChild(row);
            });
        }


        function getSliderIdByQualification(qualification) {

            return qualificationMap.indexOf(qualification) + 1;
        }
        // Get the modal
        const modal = document.getElementById('infoModal');

        // Get the <span> element that closes the modal
        const closeBtn = document.getElementsByClassName('close')[0];

        // Function to show the modal
        function showInfo() {
            modal.style.display = 'block';
        }

        // Function to hide the modal
        function hideInfo() {
            modal.style.display = 'none';
        }

        // Close the modal when the user clicks on the close button
        closeBtn.onclick = hideInfo;

        // Close the modal when the user clicks anywhere outside the modal
        window.onclick = function (event) {
            if (event.target == modal) {
                hideInfo();
            }
            if (event.target == modalmove) {
                hideInfoMove();
            }
        };


        // Get the modal
        const modalmove = document.getElementById('move3Modal');

        // Get the <span> element that closes the modal
        const closeBtnMove = document.getElementsByClassName('close')[1];

        // Function to show the modal
        function showInfoMove() {
            modalmove.style.display = 'block';
        }

        // Function to hide the modal
        function hideInfoMove() {
            modalmove.style.display = 'none';
        }

        // Close the modal when the user clicks on the close button
        closeBtnMove.onclick = hideInfoMove;


        // Close the modal when the user clicks anywhere outside the modal


    </script>

</body>

</html>
